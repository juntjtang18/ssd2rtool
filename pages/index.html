<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Strong D2R Tools</title>
  <style>
    :root { --bg:#0b0d10; --card:#12161c; --text:#e7eef7; --muted:#9db0c6; --line:#223041; --accent:#7bdcff; }
    body { margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; background:var(--bg); color:var(--text); }
    a { color: var(--accent); text-decoration: none; }
    a:hover { text-decoration: underline; }

    .wrap { max-width: 980px; margin: 0 auto; padding: 18px 14px 40px; }
    .topbar { display:flex; gap: 14px; justify-content: space-between; align-items: center; margin-bottom: 14px; }
    h1 { margin: 0 0 8px; font-size: 28px; letter-spacing: 0.2px; }
    h2 { margin: 0 0 12px; font-size: 18px; }
    .tiny { color: var(--muted); font-size: 13px; margin: 0; }

    .card { background: var(--card); border: 1px solid var(--line); border-radius: 16px; padding: 16px 16px; }
    .card + .card { margin-top: 14px; }
    ul { margin: 0; padding-left: 18px; }
    li { margin: 8px 0; }

    .langbox { display:flex; gap: 8px; align-items: center; }
    .langbox .globe { opacity: 0.9; }
    .langbox select { width: 140px; padding: 10px 10px; border-radius: 10px; border: 1px solid var(--line); background:#0f1318; color:var(--text); font-size: 14px; }

    .hero { border: 1px solid var(--line); border-radius: 16px; overflow: hidden; background: #0f1318; margin: 18px 0 14px; text-align: center; }
    .brandImg { display:block; width: min(520px, 92%); height: auto; margin: 16px auto 10px; border-radius: 14px; border: 1px solid rgba(255,255,255,0.08); background: rgba(0,0,0,0.12); }
    .brandBanner { height: 8px; background: linear-gradient(90deg, rgba(123,220,255,0.0), rgba(123,220,255,0.85), rgba(123,220,255,0.0)); }
    .brandTitle { margin: 12px 12px 14px; font-size: 26px; line-height: 1.2; letter-spacing: 0.2px; }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="hero">
      <img id="brandImg" class="brandImg" src="./images/StrongSoldier-Brand.png" alt="Strong Soldier" />
      <div class="brandBanner"></div>
      <h1 class="brandTitle" data-i18n="title">Strong D2R Tools</h1>
    </div>

    <div class="topbar">
      <div>
        <p class="tiny" data-i18n="subtitle">A small toolbox for D2R planning and calculators.</p>
      </div>

      <div class="langbox" data-i18n-title="lang.title">
        <span class="globe">üåê</span>
        <select id="langSel" data-i18n-aria-label="lang.aria">
          <option value="zh-Hant" data-i18n="lang.zhHant">ÁπÅÈ´î</option>
          <option value="zh-Hans" data-i18n="lang.zhHans">ÁÆÄ‰Ωì</option>
          <option value="en" data-i18n="lang.en">EN</option>
        </select>
      </div>
    </div>

    <div class="card">
      <h2 data-i18n="tools.title">Tools</h2>
      <ul>
        <li><a href="./pages/map-ev.html" data-i18n="tools.mapEv">Map EV Leaderboard (currency-only)</a></li>
        <li><a href="./pages/model.html" data-i18n="tools.model">Keyset Pipeline Model (Y ‚Üí X, runs, hours)</a></li>
        <li><a href="./pages/rpk.html" data-i18n="tools.rpk">Boss RPK Leaderboard (Ist per kill)</a></li>
        <li><a href="./pages/rune-drops.html" data-i18n="tools.runeDrops">Boss Rune Drop Rates (table)</a></li>
        <li><a href="./pages/runewords-planner.html" data-i18n="tools.runewordsPlanner">Runewords Planner (target ‚Üí farming plan)</a></li>
      </ul>
    </div>
  </div>

  <script type="module">
    import { detectLang, loadI18nJson, makeT, applyI18nToDom } from "./model/i18n.js";

    const els = {
      langSel: document.getElementById("langSel"),
      brandImg: document.getElementById("brandImg"),
    };

    let dict = null;
    let t = (k, vars=null) => k;

    function applyLang(lang) {
      localStorage.setItem("lang", lang);
      t = makeT(dict, lang);
      document.documentElement.lang = lang;
      document.title = t("title");
      applyI18nToDom(t);

      // Swap brand image by language
      if (els.brandImg) {
        els.brandImg.src = (lang === "en")
          ? "./images/StrongSoldier-Brand-en.png"
          : "./images/StrongSoldier-Brand.png";
      }

      els.langSel.value = lang;
    }

    async function init() {
      dict = await loadI18nJson("./i18n/index.json");
      const lang = detectLang();
      applyLang(lang);
      els.langSel.addEventListener("change", () => applyLang(els.langSel.value));
    }

    init();
  </script>
</body>
</html>
